
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    
  <head>
    <link rel="shortcut icon" href="/favicon.ico" />

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="keywords" content="" />
    <meta name="description" content="The Settle Project was created as a homepage for the projects and exploits of me, Brett Settle, throughout my career as a computer scientist" />
    <meta name="author" content="Brett Settle">
    
    <title>The Settle Project</title>
   
	 	<!-- theme style -->
		<link href="/css/default.css" rel="stylesheet" type="text/css" media="all" />
    <link href="/css/fonts.css" rel="stylesheet" type="text/css" media="all" />
		<link href="/css/style.css" rel="stylesheet" type="text/css" media="all"/>
		<link href="/css/mdb.css" rel="stylesheet" type="text/css" media="all"/>
    
		<!-- Bootstrap core CSS -->
    <link href="/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
		<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
		
		<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    
		<!-- Custom styles for this template -->
    <style>
      body {
        padding-top: 54px;
      }
      @media (min-width: 992px) {
        body {
          padding-top: 56px;
        }
      }

    </style>

  </head>

<head>
	<link href="/css/poole.css" rel="stylesheet">
	<link href="/css/blog.css" rel="stylesheet">
	<link href="/css/hyde.css" rel="stylesheet">
</head>

<body class="layout-reverse">
	<div class="blog-container">
		<div class="sidebar reverse">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
				The Albus Lepus
			</h1>
      <h4 style="color:gray">The official blog of <br/>
				<a href="http://localhost:4000">
					The Settle Project
        </a>
      </h4>
      <p class="lead">Follow the white rabbit, neo.
    	</p>
		</div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="">Home</a>

			
<ul class="tag-box inline">
  
  
     
      <li><a href="#code">Code <span style="background: rgba(255, 255, 255, .2); padding: 2px; font-size: .8em;">2</span></a></li>
     
      <li><a href="#python">Python <span style="background: rgba(255, 255, 255, .2); padding: 2px; font-size: .8em;">1</span></a></li>
     
      <li><a href="#about">About <span style="background: rgba(255, 255, 255, .2); padding: 2px; font-size: .8em;">1</span></a></li>
     
      <li><a href="#blog">Blog <span style="background: rgba(255, 255, 255, .2); padding: 2px; font-size: .8em;">1</span></a></li>
    
  

</ul>

<!--
 
  <h2 id="code">Code</h2>
  <ul class="post-list">
      
    
      
      
      <li><a href="http://localhost:4000/blog/code/2017/08/23/The-.vimrc-Debate.html">The .vimrc Debate<span class="entry-date"><time datetime="2017-08-23T00:00:00-07:00" itemprop="datePublished">August 23, 2017</time></a></li>
      
      
    
      
      
      <li><a href="http://localhost:4000/code/python/2017/08/23/Webscrapers.html">Webscrapers: API first, then UI<span class="entry-date"><time datetime="2017-08-23T00:00:00-07:00" itemprop="datePublished">August 23, 2017</time></a></li>
      
      
    
    
    
  </ul>
 
  <h2 id="python">Python</h2>
  <ul class="post-list">
      
    
      
      
      <li><a href="http://localhost:4000/code/python/2017/08/23/Webscrapers.html">Webscrapers: API first, then UI<span class="entry-date"><time datetime="2017-08-23T00:00:00-07:00" itemprop="datePublished">August 23, 2017</time></a></li>
      
      
    
    
    
  </ul>
 
  <h2 id="about">About</h2>
  <ul class="post-list">
      
    
      
      
      <li><a href="http://localhost:4000/about/2017/08/23/Welcome-to-the-Albus-Lepus.html">Welcome to the Albus Lepus<span class="entry-date"><time datetime="2017-08-23T00:00:00-07:00" itemprop="datePublished">August 23, 2017</time></a></li>
      
      
    
    
    
  </ul>
 
  <h2 id="blog">Blog</h2>
  <ul class="post-list">
      
    
      
      
      <li><a href="http://localhost:4000/blog/code/2017/08/23/The-.vimrc-Debate.html">The .vimrc Debate<span class="entry-date"><time datetime="2017-08-23T00:00:00-07:00" itemprop="datePublished">August 23, 2017</time></a></li>
      
      
    
    
    
  </ul>
	
-->


    </nav>

    <p> 2017 </p>
  </div>
</div>


		<div class="content container">
  		<div class="post">
  <h1 class="post-title">Webscrapers: API first, then UI</h1>
  <span class="post-date">23 Aug 2017</span>
  <h3 id="api-before-ui-a-webscraping-story">API Before UI: A Webscraping Story</h3>

<p>I’ve spent countless hours sifting through <a href="http://reddit.com/r/wallpaperdump">/r/wallpaperdump</a> for just the right wallpapers, downloading one in a thousand to my Wallpapers directory, and setting that desktop background to rotate through that directory.  When my roommates started pointing out how often I was browsing wallpapers, I decided to make a project out of it: <a href="http://github.com/brettjsettle/redwall">Redwall</a>.  While plenty of web scrapers already exist, my goal was to simplify the transition from internet file to desktop background.  As with any project, there were plenty of lessons along the way:</p>

<h5 id="open-source">Open Source</h5>
<p>A simple search led me to <a href="https://github.com/HoverHell/RedditImageGrab/tree/master/redditdownload">RedditImageGrabber</a> as an API to fetch post and image urls. Merged with the wallpaper setting function from <a href="https://stackoverflow.com/questions/1977694/how-can-i-change-my-desktop-background-with-python">this StackOverflow post</a> to update your wallpaper in real time,  most of the work was done for me. All I had to do was wrap these two files into one module and BOOM! Easy. All that remained was designing the interface. Better look at some examples…</p>

<h5 id="everything-exists-already">Everything Exists Already</h5>
<p>Most image scrapers provide some basic filter options and show results asa giant mesh. If you click on an image it zooms in. All that jazz. But I just wanted a fullscreen image stepper that I could control with arrow keys, which somehow didn’t seem to exist. Until I stumbled on <a href="http://imagoid.com">imagoid</a>.  A reddit image scraper for more than just wallpapers that offers fullscreen iteration with arrow keys, and it’s a webapp. (It’s seriously cool, check it out) Although I was discouraged, this project really interested me and I wanted to add my own twist.</p>

<h5 id="straight-to-ui-aka-where-i-went-wrong">Straight to UI (aka where I went wrong)</h5>
<p>My day job made heavy use of <a href="https://riverbankcomputing.com/software/pyqt/intro">PyQt</a> to build windowed image analysis applications for researchers in the lab, and I loved the SDK so much I was using it everywhere. Even places it didn’t belong.  So I started designing the layout in PyQt while working on the merging the backend code.  Which reinforced the age old lesson:</p>
<blockquote>
  <p><em>Never design your API around your user interface.</em></p>
</blockquote>

<p>Fortunately I was motivated enough to get a pretty neat result, so it all seemed worth it. I had all the functionality of a basic scraper, with background caching of images for nearly seamless scrolling.
<img src="/images/redwall_windowed_snap.PNG" alt="Initial Result" />
But I was having a lot of issues with the image scraping thread fighting the GUI thread for CPU.  I needed a simpler interface. Which also meant going back and cleaning up the API.  If you are interest in the windowed version, <a href="https://github.com/BrettJSettle/RedWall/tree/windowed">the repo branch</a> is still available.</p>

<h5 id="simple-and-reliable">Simple and reliable</h5>
<p>I stripped away all requirements other than BeautifulSoup, turned the image scraping into a Python iterator class, and wrote two wrappers for ease of use. Both are available via pip entry_points:</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="c"># Images are shown on the desktop for 8 seconds (or whatever time specified by -i)</span>
redwall_screensaver

<span class="c"># A command line interface to iterate through images manually, with a help menu.</span>
redwall_control
</code></pre>
</div>
<p>Now I can run <code class="highlighter-rouge">python_screensaver -i 20 --subreddit wallpaperdump</code> and watch reddit wallpapers scroll by at an even pace while I’m at work.  Needless to say, after this project I was MUCH less interested in browsing wallpapers.</p>

<p>For more documentation and use cases of redwall, check out <a href="http://github.com/brettjsettle/redwall">the Github</a></p>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/blog/code/2017/08/23/The-.vimrc-Debate.html">
            The .vimrc Debate
            <small>23 Aug 2017</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/about/2017/08/23/Welcome-to-the-Albus-Lepus.html">
            Welcome to the Albus Lepus
            <small>23 Aug 2017</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

		</div>
	</div>
</body>
